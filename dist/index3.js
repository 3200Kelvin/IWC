import{i as I,g as A,u as Y,a as x,b as M,c as z,d as B,e as F}from"./index.js";import{u as $}from"./index14.js";import"./index6.js";const H=()=>{const l=document.querySelector(".about-hero");if(!l)return;const t=l.querySelector(".about-hero__logo");if(!t)return;if(I()){t.classList.add("shown");return}setTimeout(()=>{t.classList.add("transition")},50);const o=A(0,a),c=Y(()=>o.observe(t));return x(c,()=>o.disconnect());function a(i,n){i.target.classList.add("shown"),n.disconnect()}},V=l=>{const t=l.querySelector(".story__timeline");if(!t)return;if(I()){t.classList.add("animated"),t.querySelectorAll(".timeline-entry").forEach(n=>{n.classList.add("animated")});return}const o=A(50,a);M()||t.querySelectorAll(".timeline-entry").forEach(n=>{o.observe(n)});const c=setTimeout(()=>{t.classList.add("transition"),o.observe(t)},10);return()=>{clearTimeout(c),o.disconnect()};function a(i,n){i.target.classList.add("animated"),n.unobserve(i.target)}},K=[{year:1996,label:"North Carolina",toShow:"#fill-nc",toColor:"#state-nc"},{year:1997,label:"District of Columbia",toShow:"#fill-dc",toColor:"#state-dc"},{year:1999,label:"Rhode Island",toShow:"#fill-ri",toColor:"#state-ri, #line-ri"},{year:1999,label:"Pennsylvania",toShow:"#fill-pa",toColor:"#state-pa"},{year:2e3,label:"Virginia",toShow:"#fill-va",toColor:"#state-va"},{year:2002,label:"Florida",toShow:"#fill-fl",toColor:"#state-fl"},{year:2003,label:"Louisiana",toShow:"#fill-la",toColor:"#state-la"},{year:2003,label:"Arkansas",toShow:"#fill-ar",toColor:"#state-ar"},{year:2004,label:"California",toShow:"#fill-ca",toColor:"#state-ca"},{year:2004,label:"Colorado",toShow:"#fill-co",toColor:"#state-co"},{year:2005,label:"Maryland",toShow:"#fill-md",toColor:"#state-md, #line-md"},{year:2005,label:"Washington",toShow:"#fill-wa",toColor:"#state-wa"},{year:2005,label:"Michigan",toShow:"#fill-mi",toColor:"#state-mi"},{year:2006,label:"Ohio",toShow:"#fill-oh",toColor:"#state-oh"},{year:2006,label:"IWC East",toShow:".story__map__label-wrapper--iwc-east"},{year:2006,label:"Massachusetts",toShow:"#fill-ma",toColor:"#state-ma, #line-ma"},{year:2007,label:"South Carolina",toShow:"#fill-sc",toColor:"#state-sc"},{year:2007,label:"New Jersey",toShow:"#fill-nj",toColor:"#state-nj, #line-nj"},{year:2007,label:"Arizona",toShow:"#fill-az",toColor:"#state-az"},{year:2007,label:"New York",toShow:"#fill-ny",toColor:"#state-ny"},{year:2008,label:"West Virginia",toShow:"#fill-wv",toColor:"#state-wv"},{year:2008,label:"Oregon",toShow:"#fill-or",toColor:"#state-or"},{year:2008,label:"Tennessee",toShow:"#fill-tn",toColor:"#state-tn"},{year:2008,label:"Idaho",toShow:"#fill-id",toColor:"#state-id"},{year:2008,label:"Illinois",toShow:"#fill-il",toColor:"#state-il"},{year:2008,label:"Vermont",toShow:"#fill-vt",toColor:"#state-vt, #line-vt"},{year:2008,label:"Georgia",toShow:"#fill-ga",toColor:"#state-ga"},{year:2008,label:"Minnesota",toShow:"#fill-mn",toColor:"#state-mn"},{year:2008,label:"Alabama",toShow:"#fill-al",toColor:"#state-al"},{year:2008,label:"Kentucky",toShow:"#fill-ky",toColor:"#state-ky"},{year:2008,label:"Missouri",toShow:"#fill-mo",toColor:"#state-mo"},{year:2008,label:"Wyoming",toShow:"#fill-wy",toColor:"#state-wy"},{year:2008,label:"Connecticut",toShow:"#fill-ct",toColor:"#state-ct, #line-ct"},{year:2008,label:"Texas",toShow:"#fill-tx",toColor:"#state-tx"},{year:2009,label:"New Hampshire",toShow:"#fill-nh",toColor:"#state-nh, #line-nh"},{year:2009,label:"Alaska",toShow:"#fill-ak",toColor:"#state-ak"},{year:2011,label:"New Mexico",toShow:"#fill-nm",toColor:"#state-nm"},{year:2011,label:"Mississippi",toShow:"#fill-ms",toColor:"#state-ms"},{year:2013,label:"Nevada",toShow:"#fill-nv",toColor:"#state-nv"},{year:2013,label:"Delaware",toShow:"#fill-de",toColor:"#state-de, #line-de"},{year:2013,label:"Wisconsin",toShow:"#fill-wi",toColor:"#state-wi"},{year:2013,label:"Kansas",toShow:"#fill-ks",toColor:"#state-ks"},{year:2014,label:"Maine",toShow:"#fill-me",toColor:"#state-me"},{year:2014,label:"Newton office",toShow:".story__map__label-wrapper--newton"},{year:2016,label:"Iowa",toShow:"#fill-ia",toColor:"#state-ia"},{year:2017,label:"Nebraska",toShow:"#fill-ne",toColor:"#state-ne"},{year:2017,label:"Utah",toShow:"#fill-ut",toColor:"#state-ut"},{year:2018,label:"North Dakota",toShow:"#fill-nd",toColor:"#state-nd"},{year:2018,label:"Atlanta office",toShow:".story__map__label-wrapper--atlanta"},{year:2020,label:"Oklahoma",toShow:"#fill-ok",toColor:"#state-ok"},{year:2020,label:"South Dakota",toShow:"#fill-sd",toColor:"#state-sd"},{year:2021,label:"Indiana",toShow:"#fill-in",toColor:"#state-in"},{year:2023,label:"Hawaii",toShow:"#fill-hi",toColor:"#state-hi"},{year:2023,label:"IWC West",toShow:".story__map__label-wrapper--iwc-west"},{year:2023,label:"Montana",toShow:"#fill-mt",toColor:"#state-mt"},{year:2024,label:"Gainesville office",toShow:".story__map__label-wrapper--gainesville"},{year:2024,label:"Raleigh office",toShow:".story__map__label-wrapper--raleigh"}],X=l=>{const t=l.querySelector(".story__map"),o={year:t.querySelector(".story__map__year p"),numbers:t.querySelectorAll(".story__map__year__number"),label:t.querySelector(".story__map__state p")},c=500;let a=-1,i=-1,n;const h=[],S=[],m=K.map(y=>{const w=t.querySelectorAll(y.toShow);h.push(...w);const _=t.querySelectorAll(y.toColor);return S.push(..._),{...y,elementsToShow:w,elementsToColor:_}});h.forEach(y=>{y.classList.add("map-entry--to-show")}),S.forEach(y=>{y.classList.add("map-entry--to-color")});const s=A(0,C,g);return s.observe(t),()=>{s.disconnect(),n&&clearTimeout(n)};function C(){n&&clearTimeout(n),v()}function g(){n&&(clearTimeout(n),n=null)}function v(){a=i,i+=1,i>=m.length?(a=m.length-1,i=-1,P()):q(),n=setTimeout(v,c)}function q(){N(),T()}function T(){const{year:y="",label:w=""}=m[a]||{},{year:_,label:E}=m[i];o.label.textContent=E,L(_,y)}function L(y,w){if(!w||y===w)return;const _=y.toString().split(""),E=w.toString().split(""),k=[...o.numbers].filter((e,r)=>(e.style.setProperty("--prev",`'${E[r]}'`),e.textContent=_[r],_[r]!==E[r]));gsap.to(k,{transform:"translateY(100%)"}),gsap.to(k,{transform:"translateY(0)",duration:c/2e3})}function P(){[...h,...S].forEach(y=>{y.classList.remove("active")})}function N(){const{elementsToShow:y,elementsToColor:w}=m[i];[...y,...w].forEach(_=>{_.classList.add("active")})}},j=()=>{const l=document.querySelector(".story");if(l)return x(V(l),X(l))},G=l=>{if(I())return;const t=l.querySelectorAll(".team__card");t.forEach((a,i)=>{a.classList.add("blurred"),a.style.setProperty("--delay",`${i%4*.1}s`)});const o=A(10,c);return setTimeout(()=>{t.forEach(a=>o.observe(a))}),()=>o.disconnect();function c(a){o.unobserve(a.target),a.target.classList.add("transition"),setTimeout(()=>{a.target.classList.remove("blurred")},50)}},U=l=>{const t=document.querySelector(".team-member-popup");if(!t)return console.warn("No team popup found");const o=t.querySelector(".team-member"),c=o.querySelector(".team-member__data"),a=t.querySelector(".team-member-popup__close"),i=l.querySelectorAll(".team__entry");let n=null;const h=[],S={},m={prev:t.querySelector(".team-member__button--prev"),next:t.querySelector(".team-member__button--next")},s=k(t);o.style.setProperty("--total",i.length),m.prev.addEventListener("click",_),m.next.addEventListener("click",w);const C=[...i].map((e,r)=>{const u=e.querySelector("a"),d=u.href;h[r]=d;const p=e.querySelector(".team__entry__images"),f=b=>{b.ctrlKey||b.shiftKey||b.altKey||(b.preventDefault(),g(d,r,p))};return u.addEventListener("click",f),()=>u.removeEventListener("click",f)});return a.addEventListener("click",y),()=>{C.forEach(e=>e()),a.removeEventListener("click",y),m.prev.removeEventListener("click",_),m.next.removeEventListener("click",w)};function g(e,r,u){n=r,o.style.setProperty("--current",n+1),gsap.set([s.card,s.content],{opacity:0});const d=E(e),p=N(u);Promise.all([d,p]).then(([f,b])=>v(f,{movingImage:b}))}function v(e,{isForwards:r=!0,movingImage:u=null,isDesktop:d=!0}={}){o.scrollTo(0,0),c.scrollTo(0,0);const p=e.querySelector(".team-member__card"),f=e.querySelector(".team-member__content");q(p,{isStatic:u!==null,isForwards:r,isDesktop:d}),s.content.innerHTML=f.innerHTML,gsap.to([s.card,s.content],{opacity:1,duration:.4}),u&&gsap.timeline().to(u,{opacity:0,duration:.4,delay:.2}).add(()=>u.remove())}function q(e,{isStatic:r=!1,isForwards:u=!0,isDesktop:d=!0}={}){if(r||!d){d||gsap.set(e,{opacity:0}),s.card.remove(),s.cardWrapper.appendChild(e),s.card=e;return}u?s.cardWrapper.appendChild(e):(s.cardWrapper.insertBefore(e,s.card),gsap.set([s.card,e],{transform:"translateX(-100%)"}));const p=u?"-100%":"0";return gsap.timeline().to([s.card,e],{transform:`translateX(${p})`,duration:.8}).add(()=>{s.card.remove(),gsap.set(e,{transform:"translateX(0)"}),s.card=e})}function T(e,r=!0){const u=M(),d=E(h[e]),p=P(u);L(e),Promise.all([d,p]).then(([f])=>{v(f,{isForwards:r,isDesktop:u}),n=e,o.style.setProperty("--current",n+1)})}function L(e){i[e].scrollIntoView({block:"center",inline:"nearest"})}function P(e=!0){const r=[s.content];return e||r.push(s.card),gsap.to(r,{opacity:0,duration:.4})}async function N(e){const r=e.cloneNode(!0),{x:u,y:d,width:p,height:f}=e.getBoundingClientRect();gsap.set(r,{position:"fixed",zIndex:12,top:0,left:0,x:u,y:d,width:p,height:f}),document.body.appendChild(r),B(),gsap.set(t,{opacity:0,display:"block"});const b=o.querySelector(".team-member__person__placeholder"),{x:D,y:O,width:W,height:R}=b.getBoundingClientRect();return await gsap.timeline().add("show").to(t,{opacity:1,duration:.8},"show").to(r,{x:D,y:O,width:W,height:R,duration:.8},"show"),r}function y(){return gsap.timeline().to(t,{opacity:0,duration:.8}).to(t,{display:"none"}).add(()=>z())}function w(e){e.preventDefault();const r=(n+1)%h.length;T(r,!0)}function _(e){e.preventDefault();const r=(n-1+h.length)%h.length;T(r,!1)}function E(e){return S[e]?Promise.resolve(S[e].cloneNode(!0)):fetch(e).then(r=>r.text()).then(r=>{const p=new DOMParser().parseFromString(r,"text/html").querySelector(".team-member");return S[e]=p,p.cloneNode(!0)}).catch(r=>{console.error("Failed to fetch page: ",r)})}function k(e){const r=e.querySelector(".team-member__card-wrapper"),u=e.querySelector(".team-member__card"),d=e.querySelector(".team-member__person"),p=e.querySelector("#team-member-email"),f=e.querySelector("#team-member-phone"),b=e.querySelector("#team-member-linkedin");return{cardWrapper:r,card:u,person:d,emailLink:p,emailLabel:p==null?void 0:p.querySelector("p"),phoneLink:f,phoneLabel:f==null?void 0:f.querySelector("p"),linkedinLink:b,linkedinLabel:b==null?void 0:b.querySelector("p"),content:e.querySelector(".team-member__content")}}},J=l=>{const t=l.querySelector(".team__list"),o=l.querySelector(".team__progress__bar");return c(),t.addEventListener("scroll",c),()=>{t.removeEventListener("scroll",c)};function c(){const a=t.scrollLeft,i=t.scrollWidth,n=t.clientWidth,h=(a+n)/i;o.style.setProperty("--progress",h)}},Q=()=>{const l=document.querySelector(".team");if(l)return x(G(l),U(l),J(l))},Z=(l,t)=>{const h=.050000000000000044,S=(1/(t.length+2)).toFixed(2),m=ScrollTrigger.create({trigger:l,start:"top bottom",end:"bottom top",scrub:!0,onUpdate:C=>{t.forEach((g,v)=>{const q=S*v,T=C.progress-q,L=-200+600*T,P=(.4-T)/h;g.style.setProperty("--translation",`${L}px`),g.style.setProperty("--opacity",P)})}}),s=F(l,m);return()=>{m.kill(),s==null||s()}},ee=(l,t)=>{const o={prev:l.querySelector(".testimonials__button--prev"),next:l.querySelector(".testimonials__button--next")},c="testimonials__entry";t.forEach(m=>{const s=m.querySelector("video");m.pauseVideo=()=>s.pause()});let a=0;return o.prev.addEventListener("click",S),o.next.addEventListener("click",h),i(),()=>{o.prev.removeEventListener("click",S),o.next.removeEventListener("click",h),a=0,i(),n()};function i(){o.prev.classList.toggle("testimonials__button--hidden",a===0),o.next.classList.toggle("testimonials__button--hidden",a===t.length-1)}function n(){t.forEach((m,s)=>{const C=Math.max(s+1-a,0),g=`${c} ${c}--${C}`;s!==a&&m.pauseVideo(),m.classList=g})}function h(){a+=1,n(),i()}function S(){a-=1,n(),i()}},te=()=>{const l=document.querySelector(".testimonials");if(!l)return;const t=l.querySelectorAll(".testimonials__entry");let o;return c(),window.addEventListener("resize",c,{passive:!0}),()=>{o==null||o(),window.removeEventListener("resize",c)};function c(){o==null||o(),o=a()}function a(){return M()?Z(l,t):ee(l,t)}},ae=()=>x(H(),j(),Q(),te(),$());export{ae as useAboutPageScripts,ae as usePageScripts};
